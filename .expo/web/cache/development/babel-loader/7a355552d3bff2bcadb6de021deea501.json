{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport AppState from \"react-native-web/dist/exports/AppState\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { BarCodeScanner } from 'expo-barcode-scanner';\nimport { Icon } from 'react-native-elements';\nimport { Audio } from 'expo-av';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar wHeight = Dimensions.get('window').height;\nvar accessLogin = false;\n\nfunction PageScanner() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasPermission = _useState2[0],\n      setHasPermission = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      scanned = _useState4[0],\n      setScanned = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      nameProduct = _useState6[0],\n      setProductName = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      amountProduct = _useState8[0],\n      setProductAmount = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      sale = _useState10[0],\n      setProductSale = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      discount = _useState12[0],\n      setProductDiscount = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      details = _useState14[0],\n      setProductDetails = _useState14[1];\n\n  var _useState15 = useState(''),\n      _useState16 = _slicedToArray(_useState15, 2),\n      lastProduct = _useState16[0],\n      setLastProduct = _useState16[1];\n\n  var _useState17 = useState(''),\n      _useState18 = _slicedToArray(_useState17, 2),\n      currentProduct = _useState18[0],\n      setCurrentProduct = _useState18[1];\n\n  var _useState19 = useState(new Date()),\n      _useState20 = _slicedToArray(_useState19, 2),\n      time = _useState20[0],\n      setTimeScanned = _useState20[1];\n\n  var _useState21 = useState(true),\n      _useState22 = _slicedToArray(_useState21, 2),\n      canScan = _useState22[0],\n      setScannerEnabled = _useState22[1];\n\n  var _useState23 = useState(BarCodeScanner.Constants.Type.back),\n      _useState24 = _slicedToArray(_useState23, 2),\n      type = _useState24[0],\n      setTypeCamera = _useState24[1];\n\n  var _React$useState = React.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      sound = _React$useState2[0],\n      setSound = _React$useState2[1];\n\n  var _useState25 = useState(true),\n      _useState26 = _slicedToArray(_useState25, 2),\n      isActive = _useState26[0],\n      setIsActive = _useState26[1];\n\n  function reloadCamera() {\n    var _await$BarCodeScanner, status;\n\n    return _regeneratorRuntime.async(function reloadCamera$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(BarCodeScanner.requestPermissionsAsync());\n\n          case 2:\n            _await$BarCodeScanner = _context.sent;\n            status = _await$BarCodeScanner.status;\n            setHasPermission(status === 'granted');\n            setIsActive(false);\n            setIsActive(true);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function playSound() {\n    var _await$Audio$Sound$cr, sound;\n\n    return _regeneratorRuntime.async(function playSound$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(Audio.Sound.createAsync(require(\"./assets/beep.mpeg\")));\n\n          case 2:\n            _await$Audio$Sound$cr = _context2.sent;\n            sound = _await$Audio$Sound$cr.sound;\n            setSound(sound);\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(sound.playAsync());\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function getUrlApi(pass) {\n    return _regeneratorRuntime.async(function getUrlApi$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.t0 = pass;\n            _context3.next = _context3.t0 === {\n              PASS_1: \"kano\"\n            } ? 3 : _context3.t0 === {\n              PASS_2: \"ori\"\n            } ? 6 : 9;\n            break;\n\n          case 3:\n            console.log({\n              PASS_1: \"kano\"\n            });\n            return _context3.abrupt(\"return\", {\n              URL_1: \"http://dk.gargano.com.uy/ventas/rest.php\"\n            });\n\n          case 6:\n            console.log({\n              PASS_2: \"ori\"\n            });\n            return _context3.abrupt(\"return\", {\n              URL_2: \"http://ori.gargano.com.uy/ventas/rest.php\"\n            });\n\n          case 9:\n            return _context3.abrupt(\"break\", 10);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var getProducts = function getProducts(barcode) {\n    var response, json, text, price, _sale, _discount, _details;\n\n    return _regeneratorRuntime.async(function getProducts$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            setProductName('BUSCANDO ' + barcode + '...');\n            setProductAmount('');\n            setProductSale('');\n            setProductDiscount('');\n            setProductDetails('');\n            _context4.prev = 5;\n            _context4.next = 8;\n            return _regeneratorRuntime.awrap(fetch('http://dk.gargano.com.uy/ventas/rest.php?token=3EeBg0D6h592AgFCkF8E1sE915&codebar=' + barcode));\n\n          case 8:\n            response = _context4.sent;\n            _context4.next = 11;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 11:\n            json = _context4.sent;\n\n            if (json.codigo != barcode) {\n              if (json.error) {\n                setProductName(json.error);\n                setProductAmount('');\n                setProductSale('');\n                setProductDiscount('');\n                setProductDetails('');\n              } else {\n                text = json.codigo + ': ' + json.nombre;\n                price = json.moneda + ' ' + json.importe;\n                _sale = '';\n                _discount = '';\n                _details = '';\n                if (json.venta != '') _sale += json.venta;\n                if (json.descuento != '') _discount += json.descuento;\n                if (json.bonifica != '') _details += json.bonifica;\n                setProductName(text);\n                setProductAmount(price);\n                setProductSale(_sale);\n                setProductDiscount(_discount);\n                setProductDetails(_details);\n              }\n            } else {\n              setProductName('Producto ' + barcode + ' no encontrado');\n            }\n\n            _context4.next = 18;\n            break;\n\n          case 15:\n            _context4.prev = 15;\n            _context4.t0 = _context4[\"catch\"](5);\n            setProductName('Error: Producto ' + barcode + ' no encontrado');\n\n          case 18:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[5, 15]], Promise);\n  };\n\n  useEffect(function () {\n    (function _callee() {\n      var _await$BarCodeScanner2, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _regeneratorRuntime.awrap(BarCodeScanner.requestPermissionsAsync());\n\n            case 2:\n              _await$BarCodeScanner2 = _context5.sent;\n              status = _await$BarCodeScanner2.status;\n              setHasPermission(status === 'granted');\n\n            case 5:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  var handleBarCodeScanned = function handleBarCodeScanned(_ref) {\n    var type, data;\n    return _regeneratorRuntime.async(function handleBarCodeScanned$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            type = _ref.type, data = _ref.data;\n\n            if (AppState.currentState == 'active') {\n              timeToGetProductData();\n\n              if (canScan) {\n                setTimeScanned(new Date());\n\n                if (lastProduct == '' && currentProduct == '') {\n                  playSound();\n                  getProducts(data);\n                  setCurrentProduct(data);\n                }\n\n                if (currentProduct != data) {\n                  playSound();\n                  getProducts(data);\n                  setLastProduct(currentProduct);\n                  setCurrentProduct(data);\n                }\n              }\n            }\n\n          case 2:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var timeToGetProductData = function timeToGetProductData() {\n    var d1, d2, more;\n    return _regeneratorRuntime.async(function timeToGetProductData$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            console.log('calculando fechas');\n            d1 = new Date();\n            d2 = new Date();\n            d1.setHours(time.getHours(), time.getMinutes(), time.getSeconds() + 1, 0);\n            more = d2.getTime() > d1.getTime();\n\n            if (more) {\n              setScanned(true);\n              setTimeScanned(d2);\n              setScannerEnabled(true);\n            } else {\n              setScanned(false);\n              setScannerEnabled(false);\n            }\n\n          case 6:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  if (hasPermission === null) {\n    return _jsx(Text, {\n      children: \"No hay permiso para acceder a la c\\xE1mara\"\n    });\n  }\n\n  if (hasPermission === false) {\n    return _jsx(Text, {\n      children: \"No hay permiso para acceder a la c\\xE1mara\"\n    });\n  }\n\n  if (accessLogin === true) {\n    return _jsxs(View, {\n      style: styles.container,\n      children: [isActive && _jsx(BarCodeScanner, {\n        onBarCodeScanned: handleBarCodeScanned,\n        type: type,\n        style: [StyleSheet.absoluteFill, styles.scanner],\n        children: _jsx(View, {\n          style: {\n            flex: 1,\n            backgroundColor: 'transparent',\n            flexDirection: 'row'\n          }\n        })\n      }), _jsx(ScrollView, {\n        style: [styles.info],\n        children: _jsxs(View, {\n          style: {\n            padding: 25,\n            fontSize: 25,\n            backgroundColor: 'white'\n          },\n          children: [_jsx(Text, {\n            style: {\n              fontSize: 30,\n              fontWeight: \"bold\"\n            },\n            children: nameProduct\n          }), _jsx(Text, {\n            style: {\n              fontSize: 40,\n              fontWeight: \"bold\",\n              color: 'red'\n            },\n            children: amountProduct\n          }), _jsx(Text, {\n            style: {\n              fontSize: 30\n            },\n            children: sale\n          }), _jsx(Text, {\n            style: {\n              fontSize: 30\n            },\n            children: discount\n          }), _jsx(Text, {\n            style: {\n              fontSize: 30\n            },\n            children: details\n          })]\n        })\n      }), _jsxs(View, {\n        style: [styles.menu],\n        children: [_jsx(Pressable, {\n          style: styles.btn,\n          onPress: function onPress() {\n            accessLogin = false;\n            setIsActive(false);\n            BackHandler.exitApp();\n          },\n          children: _jsx(Icon, {\n            name: \"log-out\",\n            type: \"feather\",\n            color: \"white\"\n          })\n        }), _jsx(TouchableOpacity, {\n          style: styles.btnscan,\n          onPress: function onPress() {\n            reloadCamera();\n          },\n          children: _jsx(Icon, {\n            name: \"search\",\n            type: \"feather\",\n            color: \"white\"\n          })\n        })]\n      })]\n    });\n  } else {\n    return _jsx(Login, {});\n  }\n}\n\nfunction Login() {\n  var _useState27 = useState(null),\n      _useState28 = _slicedToArray(_useState27, 2),\n      key = _useState28[0],\n      setClave = _useState28[1];\n\n  var _useState29 = useState(''),\n      _useState30 = _slicedToArray(_useState29, 2),\n      loginMessage = _useState30[0],\n      setLoginMessage = _useState30[1];\n\n  function changeInputKeyAccess(key) {\n    return _regeneratorRuntime.async(function changeInputKeyAccess$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            setLoginMessage('');\n            setClave(key);\n\n          case 2:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function loginRest(key) {\n    var response, json;\n    return _regeneratorRuntime.async(function loginRest$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.prev = 0;\n            console.log(getUrlApi(key));\n            _context9.next = 4;\n            return _regeneratorRuntime.awrap(fetch(getUrlApi(key)));\n\n          case 4:\n            response = _context9.sent;\n            _context9.next = 7;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 7:\n            json = _context9.sent;\n            console.log(json);\n\n            if (json.resultado) {\n              console.log('login ok');\n              accessLogin = true;\n              setClave(null);\n            } else if (json.error) {\n              setLoginMessage('Error: Clave incorrecta');\n            } else {\n              console.log(json);\n              setLoginMessage('Error: Consulte con el administrador.');\n            }\n\n            _context9.next = 17;\n            break;\n\n          case 12:\n            _context9.prev = 12;\n            _context9.t0 = _context9[\"catch\"](0);\n            console.error(_context9.t0);\n            console.log('Catch: LOGIN ' + key + '  ' + _context9.t0);\n            setLoginMessage('Error: Consulte con el administrador.');\n\n          case 17:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, null, null, [[0, 12]], Promise);\n  }\n\n  if (accessLogin == true) {\n    console.log(accessLogin);\n    console.log('retornando el escaner');\n    return _jsx(PageScanner, {});\n  } else {\n    console.log(accessLogin);\n    console.log('retornando el login');\n    return _jsxs(View, {\n      style: styles.loginPage,\n      children: [_jsx(Text, {\n        style: [styles.errorMessage],\n        children: loginMessage\n      }), _jsx(Text, {\n        style: {\n          fontSize: 30,\n          fontWeight: \"bold\",\n          marginTop: '30%'\n        },\n        children: \"Iniciar Sesi\\xF3n\"\n      }), _jsx(TextInput, {\n        secureTextEntry: true,\n        multiline: false,\n        keyboardType: \"default\",\n        placeholder: \"Clave\",\n        onChangeText: function onChangeText(text) {\n          return changeInputKeyAccess(text);\n        },\n        value: key,\n        style: {\n          fontSize: 30,\n          borderColor: '#2080ff',\n          borderWidth: 1,\n          width: '70%',\n          alignSelf: 'center'\n        }\n      }), _jsx(TouchableOpacity, {\n        style: {\n          margin: '5%',\n          width: '70%',\n          padding: 5,\n          backgroundColor: '#2080ff',\n          borderRadius: 3\n        },\n        onPress: function onPress() {\n          loginRest(key);\n        },\n        children: _jsx(Text, {\n          style: {\n            fontSize: 25,\n            color: 'white',\n            alignSelf: 'center'\n          },\n          children: \"Confirmar\"\n        })\n      })]\n    });\n  }\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    marginTop: 0,\n    height: '100%',\n    top: 0,\n    left: 0\n  },\n  scanner: {\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: 0,\n    height: '30%',\n    top: 0,\n    left: 0\n  },\n  info: {\n    flexDirection: 'column',\n    top: '30%',\n    left: 0,\n    padding: 15,\n    height: wHeight - 200\n  },\n  Text: {\n    margin: 25,\n    padding: 25\n  },\n  btnscan: {\n    width: '70%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#339944c9'\n  },\n  text: {\n    fontSize: 16,\n    lineHeight: 21,\n    fontWeight: 'bold',\n    letterSpacing: 0.25,\n    color: 'black'\n  },\n  btn: {\n    width: '30%',\n    height: 50,\n    justifyContent: 'center',\n    backgroundColor: '#ff1111c9'\n  },\n  btnRotate: {\n    width: '30%',\n    height: 50,\n    justifyContent: 'center',\n    backgroundColor: 'red',\n    position: 'relative',\n    marginTop: 15,\n    right: 0\n  },\n  menu: {\n    width: '100%',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    flexDirection: 'row',\n    backgroundColor: 'white',\n    justifyContent: 'space-between'\n  },\n  loginPage: {\n    flexDirection: 'column',\n    alignItems: 'center',\n    position: 'absolute',\n    top: 0,\n    width: '100%'\n  },\n  Button: {\n    width: '100%'\n  },\n  errorMessage: {\n    position: 'absolute',\n    top: '10%',\n    fontSize: 25,\n    width: '100%',\n    color: '#ff1111e0',\n    textAlign: 'center'\n  }\n});\nexport default function App() {\n  return _jsx(View, {\n    children: _jsx(Login, {})\n  });\n}","map":{"version":3,"sources":["/Users/usuario/Documents/scannerqrmobile/App.js"],"names":["React","useState","useEffect","BarCodeScanner","Icon","Audio","wHeight","Dimensions","get","height","accessLogin","PageScanner","hasPermission","setHasPermission","scanned","setScanned","nameProduct","setProductName","amountProduct","setProductAmount","sale","setProductSale","discount","setProductDiscount","details","setProductDetails","lastProduct","setLastProduct","currentProduct","setCurrentProduct","Date","time","setTimeScanned","canScan","setScannerEnabled","Constants","Type","back","type","setTypeCamera","sound","setSound","isActive","setIsActive","reloadCamera","requestPermissionsAsync","status","playSound","Sound","createAsync","require","playAsync","getUrlApi","pass","PASS_1","PASS_2","console","log","URL_1","URL_2","getProducts","barcode","fetch","response","json","codigo","error","text","nombre","price","moneda","importe","venta","descuento","bonifica","handleBarCodeScanned","data","AppState","currentState","timeToGetProductData","d1","d2","setHours","getHours","getMinutes","getSeconds","more","getTime","styles","container","StyleSheet","absoluteFill","scanner","flex","backgroundColor","flexDirection","info","padding","fontSize","fontWeight","color","menu","btn","BackHandler","exitApp","btnscan","Login","key","setClave","loginMessage","setLoginMessage","changeInputKeyAccess","loginRest","resultado","loginPage","errorMessage","marginTop","borderColor","borderWidth","width","alignSelf","margin","borderRadius","create","top","left","alignItems","justifyContent","Text","lineHeight","letterSpacing","btnRotate","position","right","bottom","Button","textAlign","App"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { AppState,TextInput, Text, View, StyleSheet, ScrollView, Pressable, BackHandler, Dimensions,  TouchableOpacity} from 'react-native';\nimport { BarCodeScanner } from 'expo-barcode-scanner';\nimport { Icon } from 'react-native-elements';\nimport { Audio } from 'expo-av';\nimport {PASS_1, PASS_2, URL_1, URL_2} from '@env'\n\n\nconst wHeight = Dimensions.get('window').height;\nvar accessLogin = false;\n\nfunction PageScanner() {\n  const [hasPermission, setHasPermission] = useState(null);\n  const [scanned, setScanned] = useState(false);\n  const [nameProduct, setProductName] = useState('');\n  const [amountProduct, setProductAmount] = useState('');\n  const [sale, setProductSale] = useState('');\n  const [discount, setProductDiscount] = useState('');\n  const [details, setProductDetails] = useState('');\n  const [lastProduct, setLastProduct] = useState('');\n  const [currentProduct, setCurrentProduct] = useState('');\n  const [time, setTimeScanned] = useState(new Date());\n  const [canScan, setScannerEnabled] = useState(true); //tiempo entre scanners\n  const [type, setTypeCamera] = useState(BarCodeScanner.Constants.Type.back);\n  const [sound, setSound] = React.useState();\n  const [isActive, setIsActive] = useState(true);\n\n  async function reloadCamera() {\n    const { status } = await BarCodeScanner.requestPermissionsAsync();\n    setHasPermission(status === 'granted');\n    setIsActive(false);\n    setIsActive(true);\n  }\n\n  async function playSound() {\n    const { sound } = await Audio.Sound.createAsync(\n      require('./assets/beep.mpeg')\n   );\n    setSound(sound);\n    await sound.playAsync();\n  }\n\n\n  async function getUrlApi(pass) {\n\n    switch (pass) {\n      case {PASS_1}:\n        console.log({PASS_1});\n        return {URL_1};//'?token=3EeBg0D6h592AgFCkF8E1sE915&codebar='+barcode;\n        break;\n      case {PASS_2}:\n        console.log({PASS_2});\n        return {URL_2};//'?token=3EeBg0D6h592AgFCkF8E1sE915&password='+pass;\n\n        break;\n      default:\n        break;\n    }\n    \n  }\n\n\n  const getProducts = async (barcode) => {\n    setProductName('BUSCANDO '+barcode+'...');\n    setProductAmount('');\n    setProductSale('');\n    setProductDiscount('');\n    setProductDetails('');\n    try {\n      const response = await fetch('http://dk.gargano.com.uy/ventas/rest.php?token=3EeBg0D6h592AgFCkF8E1sE915&codebar='+barcode);\n      const json = await response.json();\n      if( json.codigo != barcode ){\n        if (json.error){\n          setProductName(json.error);\n          setProductAmount('');\n          setProductSale('');\n          setProductDiscount('');\n          setProductDetails('');\n        }else{\n          let text = json.codigo +': '+ json.nombre ;\n          let price = json.moneda +' '+ json.importe;\n          let sale = '';\n          let discount = '';\n          let details = '';\n          if( json.venta != '')\n            sale += json.venta;\n          if( json.descuento != '')\n            discount += json.descuento;\n          if( json.bonifica != '')\n            details += json.bonifica;\n\n          setProductName(text);\n          setProductAmount(price);\n          setProductSale(sale);\n          setProductDiscount(discount);\n          setProductDetails(details);\n        }\n      }else{\n        setProductName('Producto '+barcode+' no encontrado');\n      }\n    } catch (error) {\n      setProductName('Error: Producto '+barcode+' no encontrado');\n    }\n  }\n  useEffect(() => {\n    (async () => {\n      const { status } = await BarCodeScanner.requestPermissionsAsync();\n      setHasPermission(status === 'granted');\n    })();\n  }, []);\n  const handleBarCodeScanned = async ({ type, data }) => {\n    if (AppState.currentState == 'active'){\n      timeToGetProductData();\n      if ( canScan ){\n        setTimeScanned(new Date());\n        if ( lastProduct == '' && currentProduct == '' ){\n          playSound();\n          getProducts(data);\n          setCurrentProduct(data);\n        }\n        if ( currentProduct != data ){\n          playSound();\n          getProducts(data);\n          setLastProduct(currentProduct);\n          setCurrentProduct(data);\n        }\n      }\n    }\n  };\n\n  const timeToGetProductData = async () => {\n    console.log('calculando fechas');\n    var d1 = new Date();//momento a habilitar\n    var d2 = new Date(); // ahora\n\n    d1.setHours(time.getHours(),time.getMinutes(),time.getSeconds()+1,0);\n    var more = d2.getTime() > d1.getTime();\n    if ( more ){\n      setScanned(true);\n      setTimeScanned(d2);\n      setScannerEnabled(true);\n    }else{\n      setScanned(false); setScannerEnabled(false);\n    }\n  };\n\n  //se obtuvo permiso de usar la cámara\n  if (hasPermission === null) {\n    return <Text>No hay permiso para acceder a la cámara</Text>;\n  }\n  if (hasPermission === false) {\n    return <Text>No hay permiso para acceder a la cámara</Text>;\n  }\n\n  if( accessLogin === true ){\n    return (\n      <View style={styles.container}>\n      {isActive && (\n        <BarCodeScanner onBarCodeScanned={handleBarCodeScanned}\n          type={type}\n          style={[StyleSheet.absoluteFill,styles.scanner]}>\n          <View\n            style={{\n              flex: 1,\n              backgroundColor: 'transparent',\n              flexDirection: 'row',\n            }}>\n          </View>\n        </BarCodeScanner>\n        )}\n        <ScrollView style={[styles.info]} >\n          <View style={{ padding:25, fontSize:25, backgroundColor:'white'}}>\n            <Text style={{ fontSize: 30, fontWeight: \"bold\"}}>{nameProduct}</Text>\n            <Text style={{ fontSize: 40, fontWeight: \"bold\", color: 'red'}}>{amountProduct}</Text>\n            <Text style={{ fontSize: 30}}>{sale}</Text>\n            <Text style={{ fontSize: 30}}>{discount}</Text>\n            <Text style={{ fontSize: 30}}>{details}</Text>\n          </View>\n        </ScrollView>\n        <View  style={[styles.menu]}>\n          <Pressable\n          style={styles.btn}\n          onPress={() => {\n            accessLogin = false;\n            setIsActive(false);\n            BackHandler.exitApp();\n          }}>\n          <Icon\n          name='log-out'\n          type='feather'\n          color='white'\n          />\n          </Pressable>\n          <TouchableOpacity\n          style={styles.btnscan}\n          onPress={() => {\n            reloadCamera();\n          }}>\n          <Icon\n          name='search'\n          type='feather'\n          color='white'\n          />\n          </TouchableOpacity>\n        </View>\n      </View>\n    );\n  }else{\n    return <Login></Login>\n  }\n}\n\nfunction Login() {\n  const [key, setClave] = useState(null);\n  const [loginMessage, setLoginMessage] = useState('');\n\n  async function changeInputKeyAccess ( key ){\n    setLoginMessage('');\n    setClave(key);\n  }\n\n  async function loginRest( key ) {\n    try {\n      //const response = await fetch('http://dk.gargano.com.uy/ventas/loginrest.php?token=3EeBg0D6h592AgFCkF8E1sE915&password='+key);\n      console.log(getUrlApi(key));\n      const response = await fetch(getUrlApi(key));\n      const json = await response.json();\n      console.log(json);\n      if( json.resultado ){\n        console.log('login ok');\n        accessLogin = true;\n        setClave(null);\n      }\n      else if( json.error ){\n        setLoginMessage('Error: Clave incorrecta');\n      }\n      else{\n        console.log(json);\n        setLoginMessage('Error: Consulte con el administrador.');\n      }\n    } catch (error) {\n      console.error(error);\n      console.log('Catch: LOGIN '+key+'  '+error);\n      setLoginMessage('Error: Consulte con el administrador.');\n    }\n  }\n\n  if (accessLogin == true) {\n    console.log(accessLogin);\n    console.log('retornando el escaner');\n    return <PageScanner></PageScanner>;\n  }else{\n    console.log(accessLogin);\n    console.log('retornando el login');\n    return (\n      <View style={styles.loginPage}>\n        <Text style={[styles.errorMessage]}>{loginMessage}</Text>\n        <Text style={{ fontSize: 30, fontWeight: \"bold\", marginTop:'30%'}}>Iniciar Sesión</Text>\n        <TextInput\n          secureTextEntry={true}\n          multiline={false}\n          keyboardType='default'\n          placeholder='Clave'\n          onChangeText={text => changeInputKeyAccess( text )}\n          value={key}\n          style={{ fontSize: 30, borderColor:'#2080ff', borderWidth:1, width:'70%', alignSelf: 'center'}}\n        />\n        <TouchableOpacity\n          style={{margin:'5%',width:'70%', padding:5, backgroundColor:'#2080ff', borderRadius:3}}\n          onPress={() => {\n            loginRest(key);\n          }}>\n          <Text style={{fontSize:25, color:'white', alignSelf: 'center'}}>Confirmar</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container:{\n    marginTop: 0,\n    height:'100%',\n    top: 0,\n    left: 0,\n  },\n  scanner: {\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: 0,\n    height:'30%',\n    top: 0,\n    left: 0,\n  },\n  info:{\n    flexDirection: 'column',\n    top: '30%',\n    left: 0,\n    padding:15,\n    height:wHeight-200,\n  },\n  Text:{\n    margin:25,\n    padding:25,\n  },\n  btnscan:{\n    width:'70%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor:'#339944c9',\n  },\n  text: {\n    fontSize: 16,\n    lineHeight: 21,\n    fontWeight: 'bold',\n    letterSpacing: 0.25,\n    color: 'black',\n  },\n  btn:{\n    width:'30%',\n    height:50,\n    justifyContent: 'center',\n    backgroundColor:'#ff1111c9',\n  },\n  btnRotate:{\n    width:'30%',\n    height:50,\n    justifyContent: 'center',\n    backgroundColor: 'red',\n    position:'relative',\n    marginTop: 15,\n    right:0\n  },\n  menu:{\n    width:'100%',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    flexDirection: 'row',\n    backgroundColor:'white',\n    justifyContent: 'space-between'\n  },\n  loginPage:{\n    flexDirection: 'column',\n    alignItems: 'center',\n    position: 'absolute',\n    top:0,\n    width:'100%',\n  },\n  Button:{\n    width:'100%'\n  },\n  errorMessage:{\n    position: 'absolute',\n    top:'10%',\n    fontSize:25,\n    width:'100%',\n    color:'#ff1111e0',\n    textAlign:'center',\n  },\n});\n\n\nexport default function App() {\n  return (\n    <View>\n      <Login></Login>\n    </View>\n  );\n}"]},"metadata":{},"sourceType":"module"}